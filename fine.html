<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Your Table</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Import new fonts from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <style>
        /* Define CSS Variables for easy theme management */
        :root {
            --primary-color: #3b4d61; /* Dark Blue Gray */
            --secondary-color: #e0eafc; /* Light Blue */
            --accent-color: #cfdef3; /* Lighter Blue */
            --text-color: #2c3e50; /* Darker Text */
            --white: #ffffff;
            --gold: #d4af37; /* Gold for accents */
            --light-gray: #f8f9fa; /* Very Light Gray */
            --border-color: #e1e5e9; /* Light Border Color */
            --shadow-light: 0 2px 15px rgba(59, 77, 97, 0.08);
            --shadow-medium: 0 5px 25px rgba(59, 77, 97, 0.12);
            --shadow-heavy: 0 10px 40px rgba(59, 77, 97, 0.15);
            --hint-color: #FFD700; /* Gold for hints */
        }

        /* Global Box-sizing and Font Setup */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #fafdff 0%, #ffffff 100%);
            color: var(--text-color);
            line-height: 1.7;
            overflow-x: hidden; /* Prevents horizontal scroll */
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color);
            font-weight: 600;
            line-height: 1.2;
        }
        
        /* New menu card styling */
        .menu-card {
            background: linear-gradient(145deg, #fdfdfd, #eaf2f9);
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .menu-section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem; /* 24px */
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .menu-item {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 500;
            font-size: 1rem; /* 16px */
            color: var(--text-color);
        }

        .menu-item-description {
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-weight: 400;
            color: #6c757d;
        }

        /* Styling for the menu filter buttons */
        .menu-filter-btn {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .menu-filter-btn:hover {
            background-color: var(--secondary-color);
        }

        .menu-filter-btn.active {
            background-color: var(--primary-color);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(59, 77, 97, 0.2);
        }
        
        .menu-filter-btn.active:hover {
            background-color: var(--primary-color); /* Maintain active color on hover */
        }

        .timeline-header-font {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
        }

        .timeline-body-font {
             font-family: 'Cormorant Garamond', serif;
             font-style: italic;
             font-weight: 500;
        }

        /* Custom Tailwind-like styles using CSS variables for a cleaner look */
        .card-shadow {
            box-shadow: var(--shadow-light);
        }
        .card-shadow:hover {
            box-shadow: var(--shadow-medium);
        }
        .gold-border {
            border-color: var(--gold);
        }
        .text-gold {
            color: var(--gold);
        }
        .text-primary {
            color: var(--primary-color);
        }
        .spinner {
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--gold);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* New horizontal timeline styles from screenshot */
        .timeline-container-split {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding: 2rem 0;
        }
        
        /* This is the main horizontal line */
        .timeline-line {
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .timeline-row-top,
        .timeline-row-bottom {
            display: flex;
            justify-content: space-between; /* This property ensures equal spacing between items */
            width: 100%;
            z-index: 10;
        }

        .timeline-item-split {
            flex: 1; /* This property ensures each item takes up equal space */
            text-align: center;
            position: relative;
        }
        
        .timeline-item-split.top {
            padding-bottom: 2rem;
        }
        
        .timeline-item-split.bottom {
            padding-top: 2rem;
        }

        /* The vertical line (spoke) that comes from the horizontal line */
        .timeline-spoke {
            width: 2px;
            background-color: var(--primary-color);
            position: absolute;
            left: 50%; /* This centers the spoke on its parent item */
            transform: translateX(-50%);
            z-index: 15;
        }
        
        .timeline-item-split.top .timeline-spoke {
            height: 2.5rem;
            bottom: -0.5rem;
        }

        .timeline-item-split.bottom .timeline-spoke {
            height: 1.5rem;
            top: -0.5rem;
        }
        
        /* Responsive timeline for mobile */
        @media (max-width: 640px) {
             .timeline-container-split {
                 flex-direction: column;
                 align-items: flex-start;
             }
            .timeline-line {
                width: 3px;
                height: 100%;
                top: 0;
                left: 1rem;
                transform: none;
            }
            .timeline-row-top,
            .timeline-row-bottom {
                flex-direction: column;
                align-items: flex-start;
                padding-left: 2rem;
            }
            .timeline-item-split {
                padding: 1rem 0;
                text-align: left;
            }
            .timeline-item-split.top,
            .timeline-item-split.bottom {
                padding-top: 1rem;
                padding-bottom: 1rem;
            }
        }
    </style>
</head>
<body>

    <!-- This section contains all the visible application content -->
    <section class="p-4 sm:p-8 flex flex-col items-center justify-center min-h-screen">
        <!-- Main container for the app content -->
        <div class="relative w-full max-w-2xl bg-white rounded-2xl p-6 sm:p-8 space-y-8 card-shadow">
            
            <!-- Back button, hidden by default -->
            <div id="backButtonContainer" class="absolute top-4 left-4 sm:top-8 sm:left-8 hidden">
                <!-- Updated back button to be an icon with hover effect -->
                <button id="backButton" class="w-10 h-10 rounded-full bg-secondary text-primary hover:bg-primary hover:text-white transition-colors duration-200 ease-in-out flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>

            <!-- Header section with title and description -->
            <div class="text-center">
                <h1 class="text-3xl sm:text-4xl tracking-tight">Find Your Table</h1>
                <p id="subHeading" class="mt-2 text-gray-500 text-sm sm:text-base font-medium">Click the button below to get started.</p>
            </div>

            <!-- Start button -->
            <div id="startButtonContainer" class="text-center">
                <button id="startButton" class="w-full sm:w-auto px-8 py-4 bg-transparent border-2 border-primary text-primary font-semibold rounded-full shadow-lg transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">
                    Start Finding Your Table
                </button>
            </div>
            
            <!-- Loading spinner, hidden by default -->
            <div id="loadingSpinner" class="hidden flex justify-center items-center py-8">
                <div class="spinner"></div>
            </div>

            <!-- Search input field, hidden by default -->
            <div id="searchContainer" class="relative hidden">
                <input type="text" id="searchInput" placeholder="Search for a table or guest..." class="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-gold transition duration-200 ease-in-out text-gray-700 font-medium">
                <span class="absolute inset-y-0 left-0 flex items-center pl-4">
                    <i class="fas fa-search text-gray-400"></i>
                </span>
            </div>

            <!-- Container for the table cards, hidden by default -->
            <div id="tablesContainer" class="space-y-4 hidden">
                <!-- Table cards will be rendered here by JavaScript -->
            </div>
            
            <!-- Container for the detailed table view, hidden by default -->
            <div id="tableDetailsContainer" class="hidden text-center space-y-6">
                <!-- Details will be rendered here dynamically -->
            </div>

            <!-- No results message, hidden by default -->
            <div id="noResults" class="hidden text-center text-gray-500">
                <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                <p>No tables or guests found matching your search.</p>
            </div>
            
        </div>
    </section>

    <script>
        window.onload = function() {
            // Use an immediately invoked function expression (IIFE) to encapsulate the code
            (() => {
                // --- DATA ---
                // Table data
                const tablesData = [
                    { name: 'Amethyst', number: 1, side: 'Right side' },
                    { name: 'Citrine', number: 2, side: 'Left side' },
                    { name: 'Diamond', number: 3, side: 'Right side' },
                    { name: 'Emerald', number: 4, side: 'Left side' },
                    { name: 'Garnet', number: 5, side: 'Right side' },
                    { name: 'Kunzite', number: 6, side: 'Left side' },
                    { name: 'Moonstone', number: 7, side: 'Right side' },
                    { name: 'Opal', number: 8, side: 'Left side' },
                    { name: 'Pearl', number: 9, side: 'Right side' },
                    { name: 'Ruby', number: 10, side: 'Left side' },
                    { name: 'Sapphire', number: 11, side: 'Right side' },
                    { name: 'Topaz', number: 12, side: 'Left side' },
                    { name: 'Carnelian', number: 13, side: 'Right side' },
                ];
                
                // Guest list data
                const guestList = [
                    // Amethyst Table
                    { firstName: "Tashrequa", lastName: "Thumbiran", table: "Amethyst" },
                    { firstName: "Sharni", lastName: "Thumbiran", table: "Amethyst" },
                    { firstName: "Damian", lastName: "Moodley", table: "Amethyst" },
                    { firstName: "Kayla", lastName: "Moodley", table: "Amethyst" },
                    { firstName: "Makayla", lastName: "Moodley", table: "Amethyst" },
                    { firstName: "Lance", lastName: "Moonsamy", table: "Amethyst" },
                    { firstName: "Lebo", lastName: "Chauke", table: "Amethyst" },
                    { firstName: "Keanan", lastName: "Beharrie", table: "Amethyst", side:"left" },
                    { firstName: "Natasha", lastName: "Beharrie", table: "Amethyst" },
                    { firstName: "Develyn", lastName: "Beharrie", table: "Amethyst" },
                    // Citrine Table
                    { firstName: "Rochelle", lastName: "Moodley", table: "Citrine" },
                    { firstName: "Shaun", lastName: "Moodley", table: "Citrine" },
                    { firstName: "Denise", lastName: "Govender", table: "Citrine" },
                    { firstName: "Pam", lastName: "Reddy", table: "Citrine" },
                    { firstName: "Seelan", lastName: "Reddy", table: "Citrine" },
                    { firstName: "Joshua", lastName: "Moonsamy", table: "Citrine" },
                    { firstName: "Tyron", lastName: "Reddy", table: "Citrine" },
                    { firstName: "Linda", lastName: "Bukan", table: "Citrine" },
                    { firstName: "Wendy", lastName: "Moodley", table: "Citrine" },
                    { firstName: "Sandra", lastName: "Devarjoo", table: "Citrine" },
                    // Diamond Table
                    { firstName: "Christelene", lastName: "Beharrie Lake", table: "Diamond" },
                    { firstName: "Sherleen", lastName: "Naidoo", table: "Diamond" },
                    { firstName: "Viven", lastName: "Naidoo", table: "Diamond" },
                    { firstName: "Vigie", lastName: "Naidoo", table: "Diamond" },
                    { firstName: "Liza", lastName: "Pillay", table: "Diamond" },
                    { firstName: "Craig", lastName: "Pillay", table: "Diamond" },
                    { firstName: "Nadine", lastName: "Beharrie", table: "Diamond" },
                    { firstName: "Andrea", lastName: "Peters", table: "Diamond" },
                    { firstName: "Mekayla", lastName: "Peters", table: "Diamond" },
                    { firstName: "Polokego", lastName: "Mokwena", table: "Diamond" },
                    // Emerald Table
                    { firstName: "Neil", lastName: "Singh", table: "Emerald" },
                    { firstName: "Zyda", lastName: "Singh", table: "Emerald" },
                    { firstName: "Dean", lastName: "Rammble", table: "Emerald" },
                    { firstName: "Jyoti", lastName: "Rammble", table: "Emerald" },
                    { firstName: "Jack", lastName: "Beharrie", table: "Emerald" },
                    { firstName: "Ellen", lastName: "Beharrie", table: "Emerald" },
                    { firstName: "Nakita", lastName: "Beharrie", table: "Emerald" },
                    { firstName: "Shane", lastName: "Moodley", table: "Emerald" },
                    { firstName: "Reena", lastName: "Moodley", table: "Emerald" },
                    // Garnet Table
                    { firstName: "Daniell", lastName: "Sagathevan", table: "Garnet" },
                    { firstName: "Aaryanna", lastName: "Sagathevan", table: "Garnet" },
                    { firstName: "Jaedon", lastName: "Reddy", table: "Garnet" },
                    { firstName: "Delese", lastName: "Singh", table: "Garnet" },
                    { firstName: "Shabena", lastName: "Khan", table: "Garnet" },
                    { firstName: "Zain", lastName: "Khan", table: "Garnet" },
                    { firstName: "Daneel", lastName: "Thumbiran", table: "Garnet" },
                    { firstName: "Kira", lastName: "Thumbiran", table: "Garnet" },
                    { firstName: "Lameez", lastName: "Ramsoroop", table: "Garnet" },
                    { firstName: "Sanesh", lastName: "Ramsoroop", table: "Garnet" },
                    // Kunzite Table
                    { firstName: "Aloma", lastName: "Bhowan", table: "Kunzite" },
                    { firstName: "Ronnie", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Rohena", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Vincent", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Veronica", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Patsy", lastName: "Rammble", table: "Kunzite" },
                    { firstName: "Robert", lastName: "Rammble", table: "Kunzite" },
                    { firstName: "Lionel", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Dalene", lastName: "Singh", table: "Kunzite" },
                    { firstName: "Pastor Marcus", lastName: "Thomas", table: "Kunzite" },
                    // Moonstone Table
                    { firstName: "Terence", lastName: "Bhowan", table: "Moonstone" },
                    { firstName: "Mary-Anne", lastName: "Bhowan", table: "Moonstone" },
                    { firstName: "Randell", lastName: "Singh", table: "Moonstone" },
                    { firstName: "Sadia", lastName: "Singh", table: "Moonstone" },
                    { firstName: "Theresa", lastName: "Bhowan", table: "Moonstone" },
                    { firstName: "Vincent", lastName: "Jn Singh", table: "Moonstone" },
                    { firstName: "Kayla", lastName: "Singh", table: "Moonstone" },
                    { firstName: "Lionel", lastName: "Singh", table: "Moonstone" },
                    { firstName: "Dashan", lastName: "Naicker", table: "Moonstone" },
                    { firstName: "Leigh", lastName: "Naicker", table: "Moonstone" },
                    // Opal Table
                    { firstName: "Ronnie", lastName: "Chinniah", table: "Opal" },
                    { firstName: "Dee", lastName: "Chinniah", table: "Opal" },
                    { firstName: "Shireen", lastName: "Moodley", table: "Opal" },
                    { firstName: "Ismail", lastName: "Essack", table: "Opal" },
                    { firstName: "Doice", lastName: "Essack", table: "Opal" },
                    { firstName: "Naazneen", lastName: "Ebrahim", table: "Opal" },
                    { firstName: "Mariam", lastName: "Ebrahim", table: "Opal" },
                    { firstName: "Clinton", lastName: "Pillay", table: "Opal" },
                    { firstName: "Pauline", lastName: "Pillay", table: "Opal" },
                    { firstName: "Rumbiga", lastName: "Pillay", table: "Opal" },
                    // Pearl Table
                    { firstName: "Silvan", lastName: "Mudali", table: "Pearl" },
                    { firstName: "Mandie", lastName: "Mudali", table: "Pearl" },
                    { firstName: "Deshaylin", lastName: "Mudali", table: "Pearl" },
                    { firstName: "Geivishka", lastName: "Mudali", table: "Pearl" },
                    { firstName: "Ineshin", lastName: "Naidoo", table: "Pearl" },
                    { firstName: "Silva", lastName: "Dherman", table: "Pearl" },
                    { firstName: "Jaya", lastName: "Dherman", table: "Pearl" },
                    { firstName: "Eugene", lastName: "Thumbiran", table: "Pearl" },
                    { firstName: "Dina", lastName: "Thumbiran", table: "Pearl" },
                    { firstName: "Pastor Martin", lastName: "Anthony", table: "Pearl" },
                    // Ruby Table
                    { firstName: "Sumeer", lastName: "Maharaj", table: "Ruby" },
                    { firstName: "Yhashika", lastName: "Maharaj", table: "Ruby" },
                    { firstName: "Dhyaana", lastName: "Maharaj", table: "Ruby" },
                    { firstName: "Tharun", lastName: "Maharaj", table: "Ruby" },
                    { firstName: "Bita", lastName: "Bhana", table: "Ruby" },
                    { firstName: "Venay", lastName: "Bhana", table: "Ruby" },
                    { firstName: "Shalesh", lastName: "Bhana", table: "Ruby" },
                    { firstName: "Sue", lastName: "Bhana", table: "Ruby" },
                    { firstName: "Kayleen", lastName: "Reddy", table: "Ruby" },
                    { firstName: "Tyric", lastName: "Reddy", table: "Ruby" },
                    // Sapphire Table
                    { firstName: "Clive", lastName: "Ragwan", table: "Sapphire" },
                    { firstName: "Marsha", lastName: "Ragwan", table: "Sapphire" },
                    { firstName: "Zack", lastName: "Khan", table: "Sapphire" },
                    { firstName: "Jocelyn", lastName: "Khan", table: "Sapphire" },
                    { firstName: "Ervin", lastName: "Beharrie", table: "Sapphire" },
                    { firstName: "Latoya", lastName: "Beharrie", table: "Sapphire" },
                    { firstName: "Aston", lastName: "Sebastian", table: "Sapphire" },
                    { firstName: "Elithea", lastName: "Sebastian", table: "Sapphire" },
                    { firstName: "Bruce", lastName: "Moodley", table: "Sapphire" },
                    { firstName: "Kayla", lastName: "Thompson", table: "Sapphire" },
                    // Topaz Table
                    { firstName: "Devika", lastName: "Moodley", table: "Topaz" },
                    { firstName: "Cedric", lastName: "Moodley", table: "Topaz" },
                    { firstName: "Prenisha", lastName: "Moodley", table: "Topaz" },
                    { firstName: "Shama", lastName: "Choklingo", table: "Topaz" },
                    { firstName: "Rahginie", lastName: "Padiachie", table: "Topaz" },
                    { firstName: "Rezaano", lastName: "Abdul", table: "Topaz" },
                    { firstName: "Chariss", lastName: "Abdul", table: "Topaz" },
                    { firstName: "Ebie", lastName: "Vally", table: "Topaz" },
                    { firstName: "Nastassia", lastName: "Vally", table: "Topaz" },
                    { firstName: "Shay", lastName: "Moc", table: "Topaz" },
                    // Carnelian Table
                    { firstName: "Levie", lastName: "Singh", table: "Carnelian" },
                    { firstName: "Mailia", lastName: "Moodley", table: "Carnelian" },
                    { firstName: "Caleb", lastName: "Bhowan", table: "Carnelian" },
                    { firstName: "Miguel", lastName: "Pillay", table: "Carnelian" },
                    { firstName: "Ilya-Mae", lastName: "Naidoo", table: "Carnelian" },
                    { firstName: "Aaliyah", lastName: "Swart", table: "Carnelian" },
                    { firstName: "Mason", lastName: "Bhowan", table: "Carnelian" },
                    { firstName: "Alaina", lastName: "Singh", table: "Carnelian" },
                    { firstName: "Ava", lastName: "Pillay", table: "Carnelian" },
                    { firstName: "Max", lastName: "Lake", table: "Carnelian" },
                    { firstName: "Chad", lastName: "Pillay", table: "Carnelian" },
                    { firstName: "Hannah", lastName: "Moodley", table: "Carnelian" },
                    { firstName: "Alyssa", lastName: "Pillay", table: "Carnelian" },
                    { firstName: "Caleb", lastName: "Reddy", table: "Carnelian" },
                    { firstName: "Mia", lastName: "Pillay", table: "Carnelian" },
                    { firstName: "John", lastName: "Singh", table: "Carnelian" },
                    { firstName: "Xavier", lastName: "Bhowan", table: "Carnelian" },
                    { firstName: "Zidane", lastName: "Singh", table: "Carnelian" },
                    { firstName: "Jade", lastName: "Bhowan", table: "Carnelian" },
                    { firstName: "Qayla", lastName: "Singh", table: "Carnelian" }
                ];
                
                // Map table names to placeholder images
                const tableImageMap = {
                    "Amethyst": "https://placehold.co/200x200/A47ECA/FFFFFF?text=Amethyst",
                    "Citrine": "https://placehold.co/200x200/E8C96E/FFFFFF?text=Citrine",
                    "Diamond": "https://placehold.co/200x200/989C9E/FFFFFF?text=Diamond",
                    "Emerald": "https://placehold.co/200x200/409F5E/FFFFFF?text=Emerald",
                    "Garnet": "https://placehold.co/200x200/9B262F/FFFFFF?text=Garnet",
                    "Kunzite": "https://placehold.co/200x200/CE81A5/FFFFFF?text=Kunzite",
                    "Moonstone": "https://placehold.co/200x200/B2BDCC/FFFFFF?text=Moonstone",
                    "Opal": "https://placehold.co/200x200/D2D3D7/FFFFFF?text=Opal",
                    "Pearl": "https://placehold.co/200x200/D8C9B9/FFFFFF?text=Pearl",
                    "Ruby": "https://placehold.co/200x200/B8233B/FFFFFF?text=Ruby",
                    "Sapphire": "https://placehold.co/200x200/1D428B/FFFFFF?text=Sapphire",
                    "Topaz": "https://placehold.co/200x200/B85B1F/FFFFFF?text=Topaz",
                    "Carnelian": "https://placehold.co/200x200/B74523/FFFFFF?text=Carnelian"
                };

                // Define a mapping for heartwarming table meanings
                const tableMeanings = {
                    'Amethyst': 'Welcome to the Amethyst table. This is more than just a table; it\'s a gathering of cherished loved ones who bring warmth and laughter. This group is a beautiful testament to the unbreakable bond you all share, and your presence feels like coming home.',
                    'Citrine': 'Welcome to the Citrine table. Like the vibrant energy of the sun, this group of cherished loved ones is a radiant circle of support and joy. Thank you for being the people who have brightened our lives through every season and in every moment.',
                    'Diamond': 'Welcome to the Diamond table. This group of cherished loved ones is a brilliant reflection of the strength and light you bring to our lives. Your connection is an unbreakable one, and this table is a celebration of the treasured bonds that truly sparkle.',
                    'Emerald': 'Welcome to the Emerald table. This is a gathering of cherished loved ones, symbolizing new beginnings and everlasting support. Your presence here represents the growth and love that has been so vital to our journey.',
                    'Garnet': 'Welcome to the Garnet table. This group of cherished loved ones is united by a deep and enduring affection. Like the stone\'s rich color, you fill our lives with passion and warmth, reminding us of the true power of lasting connection.',
                    'Kunzite': 'Welcome to the Kunzite table. This group of gentle souls is a pure reflection of the love and harmony that connects our most cherished loved ones. We are honored to have you here, creating a circle of peace and comfort.',
                    'Moonstone': 'Welcome to the Moonstone table. Just as the moonstone guides and illuminates, each of you is a guiding light in our lives. This table is for the cherished loved ones whose presence makes our shared journey truly magical.',
                    'Opal': 'Welcome to the Opal table. Like the many unique colors of an opal, this beautiful mix of cherished loved ones adds a special and brilliant hue to our lives. Each of you contributes a one-of-a-kind light that makes our world so much richer.',
                    'Pearl': 'Welcome to the Pearl table. This gathering is a collection of timeless connections. Each person here is a precious pearl of wisdom and pure joy, reminding us of the beautiful history we\'ve built and the precious moments we\'ve shared.',
                    'Ruby': 'Welcome to the Ruby table. This is home to fierce and passionate hearts, a group of cherished loved ones whose loyalty has been a powerful force in our lives. Thank you for supporting us so fiercely; you are a true symbol of enduring commitment.',
                    'Sapphire': 'Welcome to the Sapphire table. This group of cherished loved ones represents true loyalty and profound wisdom. Your presence is a faithful pillar of our lives, bringing a deep sense of peace and trust that we cherish beyond measure.',
                    'Topaz': 'Welcome to the Topaz table. This group is a gathering of loving and joyful companions, symbolizing the very light and warmth of true connection. Thank you for being a part of the unbreakable bonds that define our lives.',
                    'Carnelian': 'Welcome to the Carnelian table. This is a group of bright and lively spirits, a symbol of the bold courage and vibrant energy that has shaped our journey. Your presence fills this space with life and excitement.',
                };

                // Timeline data with position (top or bottom)
                const timelineData = [
                    { time: "1:30 PM", event: "Guest Arrival & Seating", position: 'top' },
                    { time: "2:00 PM", event: "Wedding Ceremony", position: 'bottom' },
                    { time: "3:00 PM", event: "Capture the moment", position: 'top' },
                    { time: "3:30 PM", event: "Cocktail Hour", position: 'bottom' },
                    { time: "4:45 PM", event: "Recessional & Congratulations", position: 'top' },
                    { time: "5:00 PM", event: "Reception", position: 'bottom' },
                    { time: "5:10 PM", event: "Speeches", position: 'top' },
                    { time: "6:00 PM", event: "Dinner", position: 'bottom' },
                    { time: "7:00 PM", event: "First Dance", position: 'top' },
                    { time: "10:00 PM", event: "Final Farewell", position: 'bottom' }
                ];

                // Menu Data
                const menuData = {
                    adult: {
                        starters: [
                            "Peppadew & Herb Bruschetta"
                        ],
                        mainCourse: [
                            { name: "Slow-Roasted Honey-Mustard Chicken", description: "" },
                            { name: "Aromatic Chicken & Vegetable Biryani", description: "Accompaniments: Savory basmati rice, parmesan crusted roasted potatoes, oven baked mixed vegetables, cream spinach, cauliflower, broccoli white sauce" }
                        ],
                        desserts: [
                            "Rich Chocolate Brownie & Caramel Mousse",
                            "Velvety New York-Style Cheesecake",
                            "Artisanal Wedding Cake"
                        ]
                    },
                    kids: {
                        starters: [
                            "Rainbow Fruit Sticks"
                        ],
                        mainCourse: [
                            { name: "Creamy Macaroni & Cheese with Golden Chicken Bites", description: "" },
                            { name: "Hearty Macaroni with Savory Mince & Golden Chicken Bites", description: "" }
                        ],
                        desserts: [
                            "Rich Chocolate Brownie & Caramel Mousse",
                            "Velvety New York-Style Cheesecake",
                            "Artisanal Wedding Cake"
                        ]
                    }
                };
                

                // --- DOM ELEMENTS ---
                const startButton = document.getElementById('startButton');
                const searchInput = document.getElementById('searchInput');
                const backButton = document.getElementById('backButton');
                const subHeading = document.getElementById('subHeading');
                
                // Main containers
                const startButtonContainer = document.getElementById('startButtonContainer');
                const backButtonContainer = document.getElementById('backButtonContainer');
                const searchContainer = document.getElementById('searchContainer');
                const tablesContainer = document.getElementById('tablesContainer');
                const tableDetailsContainer = document.getElementById('tableDetailsContainer');
                const noResultsMessage = document.getElementById('noResults');
                const loadingSpinner = document.getElementById('loadingSpinner');

                // --- STATE & DATA PROCESSING ---
                let currentView = 'start';
                const allGuests = guestList.map(guest => ({
                    ...guest,
                    fullName: `${guest.firstName} ${guest.lastName}`.toLowerCase()
                }));

                /**
                 * Helper function to show and hide different sections of the app.
                 * @param {string} view The view to show ('start', 'list', 'details', 'guests', 'timeline', 'menu').
                 */
                const toggleViews = (view) => {
                    // Determine if a back button should be shown
                    const showBackButton = view !== 'start';
                    
                    // Toggle visibility of the main containers
                    startButtonContainer.classList.toggle('hidden', view !== 'start');
                    searchContainer.classList.toggle('hidden', view !== 'list');
                    tablesContainer.classList.toggle('hidden', view !== 'list');
                    tableDetailsContainer.classList.toggle('hidden', view === 'start' || view === 'list');
                    backButtonContainer.classList.toggle('hidden', !showBackButton);
                    noResultsMessage.classList.add('hidden');
                };

                /**
                 * Renders a loading state.
                 * @param {boolean} show Whether to show or hide the spinner.
                 */
                const showLoading = (show) => {
                    loadingSpinner.classList.toggle('hidden', !show);
                    startButtonContainer.classList.toggle('hidden', show);
                    searchContainer.classList.toggle('hidden', show);
                    tablesContainer.classList.toggle('hidden', show);
                };

                /**
                 * Renders the table cards based on the provided data.
                 * @param {Array<Object>} tables The array of table objects to render.
                 */
                const renderTables = (tables) => {
                    tablesContainer.innerHTML = '';
                    
                    if (tables.length === 0) {
                        noResultsMessage.classList.remove('hidden');
                    } else {
                        noResultsMessage.classList.add('hidden');
                        tables.forEach(table => {
                            const card = document.createElement('div');
                            card.className = 'bg-white border-2 border-transparent hover:border-gold rounded-lg p-4 flex items-center justify-between transition-all duration-300 ease-in-out card-shadow hover:card-shadow cursor-pointer';
                            card.innerHTML = `
                                <div class="flex items-center">
                                    <div class="w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 mr-4 overflow-hidden rounded-full">
                                        <img src="${tableImageMap[table.name]}" alt="Image of ${table.name}" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/100x100?text=${table.name}';">
                                    </div>
                                    <div class="flex-grow text-left">
                                        <h3 class="text-lg sm:text-xl">${table.name}</h3>
                                        <div class="mt-1 text-sm sm:text-base text-gray-600">
                                            <p>Location: <span class="font-medium text-gray-900">${table.side}</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-gray-400 text-lg transition-transform duration-200 ease-in-out group-hover:translate-x-1">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            `;
                            card.addEventListener('click', () => renderTableDetails(table));
                            tablesContainer.appendChild(card);
                        });
                    }
                };

                /**
                 * Renders the detailed view for a single table.
                 * @param {Object} table The table object to render.
                 */
                const renderTableDetails = (table) => {
                    currentView = 'details';
                    toggleViews('details');
                    
                    subHeading.textContent = `Your Table Details`;
                    const meaning = tableMeanings[table.name] || 'This table is a wonderful place for you to connect and celebrate your special day.';
                    
                    // Determine the correct location message based on the table side
                    let locationMessage = '';
                    if (table.side === 'Left side') {
                        locationMessage = ' Upon entering the reception hall, please follow the signs to your designated side of the hall. On the Left Side, you will find table cards arranged in the centre of your assigned table. If you need any assistance, our coordinators are here to guide you.';
                    } else if (table.side === 'Right side') {
                        locationMessage = ' Upon entering the reception hall, please follow the signs to your designated side of the hall. On the Right Side, you will find table cards arranged in the centre of your assigned table. If you need any assistance, our coordinators are here to guide you.';
                    }
                    
                    tableDetailsContainer.innerHTML = `
                        <div class="w-full">
                            <!-- Table Image and Name (moved here) -->
                            <div class="bg-white p-6 rounded-2xl mb-6 flex flex-col items-center">
                                <h2 class="text-2xl sm:text-3xl text-primary mb-4">${table.name}</h2>
                                <img src="${tableImageMap[table.name]}" alt="Image of ${table.name}" class="w-32 h-32 sm:w-48 sm:h-48 rounded-full object-cover border-4 border-gold shadow-lg">
                            </div>

                            <!-- Tab Buttons -->
                            <div class="flex justify-center sm:justify-start space-x-2 sm:space-x-4 mb-6 border-b border-gray-200 overflow-x-auto">
                                <button id="tab-details" class="tab-button px-4 py-3 sm:px-6 sm:py-3 text-sm sm:text-base font-semibold text-primary rounded-t-lg transition-colors duration-200 ease-in-out border-b-2 border-primary">
                                    Details
                                </button>
                                <button id="tab-meaning" class="tab-button px-4 py-3 sm:px-6 sm:py-3 text-sm sm:text-base font-semibold text-gray-500 rounded-t-lg hover:text-primary transition-colors duration-200 ease-in-out border-b-2 border-transparent">
                                    Meaning
                                </button>
                                <button id="tab-guests" class="tab-button px-4 py-3 sm:px-6 sm:py-3 text-sm sm:text-base font-semibold text-gray-500 rounded-t-lg hover:text-primary transition-colors duration-200 ease-in-out border-b-2 border-transparent">
                                    Guests
                                </button>
                                <button id="tab-timeline" class="tab-button px-4 py-3 sm:px-6 sm:py-3 text-sm sm:text-base font-semibold text-gray-500 rounded-t-lg hover:text-primary transition-colors duration-200 ease-in-out border-b-2 border-transparent">
                                    Timeline
                                </button>
                                <button id="tab-menu" class="tab-button px-4 py-3 sm:px-6 sm:py-3 text-sm sm:text-base font-semibold text-gray-500 rounded-t-lg hover:text-primary transition-colors duration-200 ease-in-out border-b-2 border-transparent">
                                    Menu
                                </button>
                            </div>

                            <!-- Tab Content -->
                            <div id="tab-content" class="text-center space-y-6">
                                <!-- Details Tab Content -->
                                <div id="content-details" class="tab-content block">
                                    <p class="text-lg text-gray-600 font-medium leading-relaxed mb-6">
                                        Your table is located on the <span class="text-primary font-semibold">${table.side}</span>.
                                        ${locationMessage}
                                    </p>
                                </div>
                                <!-- Meaning Tab Content -->
                                <div id="content-meaning" class="tab-content hidden">
                                    <div class="bg-white p-6 rounded-2xl card-shadow">
                                        <h3 class="text-xl sm:text-2xl text-primary mb-2">Meaning of the Table</h3>
                                        <p class="text-lg text-gray-600">${meaning}</p>
                                    </div>
                                </div>
                                <!-- Guests Tab Content -->
                                <div id="content-guests" class="tab-content hidden">
                                    <h3 class="text-2xl sm:text-3xl text-primary mb-4">Guests at ${table.name}</h3>
                                    <ul id="guest-list" class="list-none space-y-2 mt-4 text-center">
                                        <!-- Guest names will be populated here -->
                                    </ul>
                                </div>
                                <!-- Timeline Tab Content -->
                                <div id="content-timeline" class="tab-content hidden">
                                    <h3 class="text-3xl sm:text-4xl timeline-header-font font-normal tracking-wide text-primary mb-8">ORDER <span class="text-gray-400 font-normal italic mx-2">of</span> EVENTS</h3>
                                    <div class="w-full">
                                        <div class="timeline-container-split">
                                            <!-- Timeline items will be rendered here dynamically -->
                                        </div>
                                    </div>
                                </div>
                                <!-- Menu Tab Content -->
                                <div id="content-menu" class="tab-content hidden">
                                    <h3 class="text-2xl sm:text-3xl text-primary mb-4">Wedding Menu</h3>
                                    <div class="flex justify-center space-x-4 mb-6">
                                        <button id="menu-adult-btn" class="menu-filter-btn px-6 py-2 rounded-full active">Adult Menu</button>
                                        <button id="menu-kids-btn" class="menu-filter-btn px-6 py-2 rounded-full">Children's Menu</button>
                                    </div>
                                    <div id="menu-content-container">
                                        <!-- Menu items will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Add event listeners for the new tabs
                    document.getElementById('tab-details').addEventListener('click', () => switchTab('details'));
                    document.getElementById('tab-meaning').addEventListener('click', () => switchTab('meaning'));
                    document.getElementById('tab-guests').addEventListener('click', () => {
                        renderGuestList(table);
                        switchTab('guests');
                    });
                    document.getElementById('tab-timeline').addEventListener('click', () => {
                        renderTimeline();
                        switchTab('timeline');
                    });
                    document.getElementById('tab-menu').addEventListener('click', () => {
                        renderMenu('adult'); // Default to adult menu
                        switchTab('menu');
                    });
                    
                    // Add event listeners for the menu buttons
                    document.getElementById('menu-adult-btn').addEventListener('click', () => renderMenu('adult'));
                    document.getElementById('menu-kids-btn').addEventListener('click', () => renderMenu('kids'));

                    // Switch to the details tab by default
                    switchTab('details');
                };

                /**
                 * Handles tab switching logic.
                 * @param {string} tabName The name of the tab to activate ('details', 'meaning', 'guests', 'timeline', 'menu').
                 */
                const switchTab = (tabName) => {
                    // Deactivate all tabs and hide all content
                    document.querySelectorAll('.tab-button').forEach(button => {
                        button.classList.remove('text-primary', 'border-primary');
                        button.classList.add('text-gray-500', 'border-transparent');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.add('hidden');
                        content.classList.remove('block');
                    });

                    // Activate the selected tab and show its content
                    const activeTabButton = document.getElementById(`tab-${tabName}`);
                    const activeTabContent = document.getElementById(`content-${tabName}`);
                    
                    activeTabButton.classList.remove('text-gray-500', 'border-transparent');
                    activeTabButton.classList.add('text-primary', 'border-primary');
                    
                    activeTabContent.classList.remove('hidden');
                    activeTabContent.classList.add('block');
                };
                
                /**
                 * Renders the menu content based on the type (adult or kids).
                 * @param {string} menuType The type of menu to display ('adult' or 'kids').
                 */
                const renderMenu = (menuType) => {
                    const menuContentContainer = document.getElementById('menu-content-container');
                    menuContentContainer.innerHTML = ''; // Clear previous content

                    // Update button styles
                    const adultBtn = document.getElementById('menu-adult-btn');
                    const kidsBtn = document.getElementById('menu-kids-btn');
                    
                    adultBtn.classList.remove('active');
                    kidsBtn.classList.remove('active');

                    if (menuType === 'adult') {
                        adultBtn.classList.add('active');
                    } else {
                        kidsBtn.classList.add('active');
                    }

                    const menu = menuData[menuType];
                    
                    let menuHtml = '';

                    // Starters
                    if (menu.starters && menu.starters.length > 0) {
                        menuHtml += `
                            <div class="mb-6 text-left">
                                <h4 class="menu-section-title mb-4 text-primary">Starters</h4>
                                <div class="space-y-4">
                                    ${menu.starters.map(item => `
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 rounded-full bg-gold mr-3 flex-shrink-0"></div>
                                            <span class="menu-item">${item}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="border-b border-gray-300 mb-6"></div>
                        `;
                    }

                    // Main Course
                    if (menu.mainCourse && menu.mainCourse.length > 0) {
                        menuHtml += `
                            <div class="mb-6 text-left">
                                <h4 class="menu-section-title mb-4 text-primary">Main Course</h4>
                                <div class="space-y-4">
                                    ${menu.mainCourse.map(item => `
                                        <div>
                                            <div class="flex items-center">
                                                <div class="w-2 h-2 rounded-full bg-gold mr-3 flex-shrink-0"></div>
                                                <span class="menu-item font-semibold">${item.name}</span>
                                            </div>
                                            ${item.description ? `<p class="menu-item-description ml-5 mt-1">${item.description}</p>` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="border-b border-gray-300 mb-6"></div>
                        `;
                    }
                    
                    // Desserts
                    if (menu.desserts && menu.desserts.length > 0) {
                        menuHtml += `
                            <div class="mb-6 text-left">
                                <h4 class="menu-section-title mb-4 text-primary">Desserts</h4>
                                <div class="space-y-4">
                                    ${menu.desserts.map(item => `
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 rounded-full bg-gold mr-3 flex-shrink-0"></div>
                                            <span class="menu-item">${item}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    }

                    menuContentContainer.innerHTML = menuHtml;
                };

                /**
                 * Renders the guest list for a specific table.
                 * @param {Object} table The table object.
                 */
                const renderGuestList = (table) => {
                    const guestListElement = document.getElementById('guest-list');
                    guestListElement.innerHTML = '';
                    
                    // Sort guests alphabetically by last name, then first name
                    const guests = allGuests.filter(g => g.table === table.name).sort((a, b) => {
                        const lastNameCompare = a.lastName.localeCompare(b.lastName);
                        if (lastNameCompare !== 0) return lastNameCompare;
                        return a.firstName.localeCompare(b.firstName);
                    });

                    if (guests.length === 0) {
                        guestListElement.innerHTML = '<li class="text-gray-500">No guests found for this table.</li>';
                    } else {
                        guests.forEach(guest => {
                            const guestItem = document.createElement('li');
                            guestItem.className = 'text-lg text-gray-700 font-medium';
                            guestItem.textContent = `${guest.firstName} ${guest.lastName}`;
                            guestListElement.appendChild(guestItem);
                        });
                    }
                };
                
                /**
                 * Renders the wedding day timeline.
                 */
                const renderTimeline = () => {
                    const timelineContainer = document.querySelector('.timeline-container-split');
                    // Clear the container before re-rendering
                    timelineContainer.innerHTML = '';
                    
                    // Always add the main line first
                    const line = document.createElement('div');
                    line.className = 'timeline-line';
                    timelineContainer.appendChild(line);

                    // Create a container for the top and bottom rows
                    const topRow = document.createElement('div');
                    topRow.className = 'timeline-row-top';
                    const bottomRow = document.createElement('div');
                    bottomRow.className = 'timeline-row-bottom';

                    timelineData.forEach(item => {
                        const timelineItem = document.createElement('div');
                        timelineItem.className = `timeline-item-split ${item.position}`;
                        timelineItem.innerHTML = `
                            <div class="timeline-spoke"></div>
                            <p class="text-sm sm:text-base font-semibold text-primary timeline-header-font">${item.time}</p>
                            <p class="text-sm sm:text-base text-gray-600 timeline-body-font">${item.event}</p>
                        `;
                        if (item.position === 'top') {
                            topRow.appendChild(timelineItem);
                        } else {
                            bottomRow.appendChild(timelineItem);
                        }
                    });

                    timelineContainer.appendChild(topRow);
                    timelineContainer.appendChild(bottomRow);
                };

                /**
                 * Handles the search functionality, filtering tables and guests.
                 */
                const handleSearch = () => {
                    const searchTerm = searchInput.value.toLowerCase().trim();
                    
                    // If a search term exists, filter both tables and guests
                    if (searchTerm) {
                        const foundGuests = allGuests.filter(guest => guest.fullName.includes(searchTerm));
                        const foundTables = new Set(foundGuests.map(guest => tablesData.find(t => t.name === guest.table)));
                        
                        const tablesBySearch = tablesData.filter(table =>
                            table.name.toLowerCase().includes(searchTerm) ||
                            table.number.toString().includes(searchTerm)
                        );
                        
                        // Combine and remove duplicates
                        const combinedTables = Array.from(new Set([...tablesBySearch, ...foundTables]));
                        renderTables(combinedTables);
                    } else {
                        // If search is empty, show all tables
                        renderTables(tablesData);
                    }
                };
                
                // --- EVENT LISTENERS ---
                startButton.addEventListener('click', () => {
                    showLoading(true);
                    // Simulate a network delay for a more realistic user experience
                    setTimeout(() => {
                        showLoading(false);
                        currentView = 'list';
                        toggleViews('list');
                        subHeading.textContent = 'Search for a table or guest to find your seat.';
                        searchInput.value = ''; // Clear search input on back
                        renderTables(tablesData);
                    }, 1000);
                });

                searchInput.addEventListener('input', handleSearch);

                backButton.addEventListener('click', () => {
                    if (currentView === 'guests' || currentView === 'details' || currentView === 'timeline' || currentView === 'menu') {
                        // From details/guests/timeline/menu back to the tables list
                        currentView = 'list';
                        toggleViews('list');
                        subHeading.textContent = 'Search for a table or guest to find your seat.';
                        searchInput.value = ''; // Clear search input on back
                        renderTables(tablesData);
                    } else {
                        // From tables list back to start page
                        currentView = 'start';
                        toggleViews('start');
                        subHeading.textContent = 'Click the button below to get started.';
                        searchInput.value = ''; // Clear search input on back
                    }
                });
            })();
        };
    </script>

</body>
</html>


